<!doctype html>
<html lang="en" class="h-100">


<!-- Mirrored from maxartkiller.com/website/Nauticspot/nearby.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 31 Aug 2020 16:49:13 GMT -->
{{element->header_app.html}}


<body class="body-scroll d-flex flex-column h-100 menu-overlay">

    <style>

        #infometeo {
            background-repeat: no-repeat;
            background-size: cover;
            background-position: 50% 50%;
            width: 100%;
        }

        .container {
        }


        .btn-lgft, .dates, .temp {
            color: #fff;
        }

            .btn-lgft:hover {
                color: #fff;
            }

        #date_heure {
            font-size: 30px;
            color: #fff;
        }

        .temp {
            font-size: 50px;
        }

        .texth3 {
            font-size: 30px;
            color: #1A73E8;
        }

        .fa-lock {
            margin-right: 10px
        }

        .order {
            margin-top: 10px
        }

        .text1 {
            color: #fff;
            font-size: 16px;
        }

        .temperature {
            font-size: 40px;
        }

        .nav-bg, .nav-menu-item {
            background-color: #003699;
        }

            .nav-menu-item:hover {
                background-color: #437de8;
            }

        .btn-meteo {
            background-color: #ffc107;
            height: 140px;
            display: block;
            vertical-align: middle;
            align-items: center;
        }

        .ligne {
            background-color: #fff;
        }

        .hr-theme-slash-2 {
            display: flex;
        }

        .hr-line {
            width: 100%;
            position: relative;
            margin: 15px;
            border-bottom: 1px solid #1A73E8;
        }

        .hr-icon {
            position: relative;
            top: 3px;
            color: #1A73E8;
        }

        .modal-dialog {
            width: 100%;
            max-width: none;
            margin: 0;
        }
        /* style modal detail*/
        #detail {
            height: all;
            border: 0;
            border-radius: 0;
            background-image: linear-gradient(rgba(0,0,0,0.3),rgba(0,0,0,0.3)),url(/img/img-meteo/bg-ocean.jpg);
            background-repeat: no-repeat;
            background-size: cover;
            background-position: 50% 50%;
            background-attachment: scroll;
        }

        .modal-title {
            text-align: center;
            color: #fff;
            display: inline-block;
        }

        .modal-header {
            display: inline-block;
        }

            .modal-header .close {
                padding: 1rem 1rem;
                margin-left: 0px;
                color: #fff;
                display: inline-block;
                font-size: 50px;
                font-weight: 300;
            }

        .modal-body {
            padding-right: 0px;
            padding-left: 0px;
        }

        p {
            margin-bottom: 5px;
        }

        .container {
        }

        .card-title {
            justify-content: space-between;
            margin-top: 25px
        }

        .line2 {
            border-bottom: 1px solid #c1bcbc;
            padding-bottom: 0px;
            padding-left: 0px;
            margin-left: 0px;
            margin-right: 0px;
        }

        .texth3 {
            font-size: 30px;
            color: #fff;
        }

        .text1 {
            color: #fff;
            font-size: 16px;
        }

        .temperature {
            font-size: 40px;
        }

        #color-overlay {
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            width: 100%;
            height: 100%;
            background-color: black;
            opacity: 0.2;
            position: fixed;
        }

        .nav-bg, .nav-menu-item {
            background-color: #003699;
        }

            .nav-menu-item:hover {
                background-color: #437de8;
            }



        .half-circle {
            width: 100%;
            height: 200px;
            border-top-left-radius: 50%;
            border-top-right-radius: 50%;
            border-top: 2px solid #fff;
            border-bottom: 0;
            align-items: center;
            vertical-align: bottom;
            color: #fff;
            margin: auto;
            display: flex;
        }
    </style>
    <style type="text/css">
        /* boussole vent */
        .bg-boussole {
            background-image: url(/img/img-meteo/bg-bssl.png);
            background-repeat: no-repeat;
            background-size: contain;
            background-position: center;
            padding: 15px;
            width: 100%;
            height: 100%;
        }

        .bg-boussolevague {
            background-image: url(/img/img-meteo/bg-bssl-vg.png);
            background-repeat: no-repeat;
            background-size: contain;
            background-position: center;
            padding: 7px;
            width: 100%;
            height: 100%;
        }

        #compassContainervent {
            width: 100px;
            height: 100px;
            margin: 0 auto;
            position: relative;
        }

        #compassRingvent {
            height: 100px;
            width: 100px;
            border: 4px solid #fff;
            border-radius: 50%;
        }

        #compassRingventjaune {
            height: 100px;
            width: 100px;
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-bottom: 6px solid transparent;
            border-bottom-color: #ffc107;
            border-radius: 50%;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 9;
            -webkit-transform-origin: bottom;
            /*transform: rotate(330deg);
                            -webkit-transform: rotate(20deg);*/
            transform-origin: center;
        }

        #compassRingventjaunedetail {
            height: 100px;
            width: 100px;
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-bottom: 6px solid transparent;
            border-bottom-color: #ffc107;
            border-radius: 50%;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 9;
            -webkit-transform-origin: bottom;
            /*transform: rotate(330deg);
                            -webkit-transform: rotate(20deg);*/
            transform-origin: center;
        }

        #pointerContainvent {
            display: flex;
            vertical-align: middle;
            color: #fff;
            margin: auto;
            width: 100%;
            height: 100%;
        }
        /* boussole vague */
        #compassContainervague {
            width: 50px;
            height: 50px;
            margin: 0 auto;
            position: relative;
        }

        #compassRingvague {
            height: 50px;
            width: 50px;
            border: 15px solid #FFF;
            border-radius: 50%;
        }

        #compassRingvaguejaune {
            height: 50px;
            width: 50px;
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-bottom: 15px solid transparent;
            border-bottom-color: #ffc107;
            border-radius: 50%;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 9;
            -webkit-transform: rotate(0deg);
            -webkit-transform-origin: bottom;
            transform: rotate(0deg);
            transform-origin: center;
        }


        #pointerContainvague {
            align-items: center;
            vertical-align: middle;
            color: #fff;
            margin: auto;
            width: 100%;
            height: 100%;
            display: flex;
        }

        #quatrepointvague {
            height: 60px;
            width: 60px;
            border: 2px solid #FFF;
            border-radius: 50%;
        }

        html, body {
            max-width: 100%;
            overflow-x: hidden;
        }
    </style>
    <!-- screen loader -->
    {{element->loader.html}}
    {{element->navheader.html}}
    <nav class="navbar navbar-light fixed-top" style="top:30px;">
        <a id="return_link" class="navbar-brand" href="/index"><i style="font-size:30px;text-color:white;" class="bi bi-arrow-left-circle-fill"></i></a>
    </nav>
    <!-- Begin page content -->
    <main class="flex-shrink-0 p-0 m-0" style="width:100%">
        <div id="weather_card">
            <div style="background-color: rgba(0, 0, 0, 0.4);width: 100%;height: 100%;">
                <!-- Fixed navbar -->
                <!-- page content start -->
                <!-- map -->
                <div class="container-fluid" style="padding-top: 100px;padding-right:0px;padding-left:0px;width:100%">
                    <div class="row p-0 line2 py-0">
                        <div class="col-6 text-center">

                            <p class="text1" style="vertical-align: bottom;display:inline-block;" id="meteo_desc"></p>

                            <!--
                                                    <div class="row">
                                                        <div class="col-12 text-center">
                                                            <div class="half-circle row align-bottom">
                                                                <div class="col-4 text-left">
                                                                    <p class="item text1" style="margin-left: -30px;" id="sunrise">06:15</p>
                                                                </div>
                                                                <div class="col-4 text-center">
                                                                    <p class="item text1">13:42</p>
                                                                </div>
                                                                <div class="col-4 text-right">
                                                                    <p class="item text1" style="margin-right: -30px;" id="sunset">21:09</p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                            -->
                        </div>
                        <div class="col-6 text-center">
                            <div class="row">
                                <div class="col-12 text-center">
                                    <p id="moon_state" class="text1"></p>
                                    <img src="/img/img-meteo/pleine-lune.png" id="moon_img">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row p-0 line2 py-1">
                        <div class="col-2 text-center"><p class="text1">Min</p><p class="temp-min text1"><span id="temperature_min"></span><span>°</span></p></div>
                        <div class="col-8 text-center"><p class="text1 temperature"><span id="temperature"></span><span>°</span></p></div>
                        <div class="col-2 text-center"><p class="text1">Max</p><p class="temp-max text1"><span id="temperature_max"></span><span>°</span></p></div>
                    </div>
                    <div class="row p-0 line2 py-1">
                        <div class="col-12">
                            <h6 class="text1" style="font-weight: bold">Vent</h6>
                        </div>
                        <div class="col-6 text-center" style="vertical-align: middle;margin:auto;">
                            <div class="row">
                                <div class="col" id="wind_direction">
                                    <div class="bg-boussole" style="background-image:url('/img-meteo/bg-bssl.png');background-size: auto 100%;background-repeat: no-repeat;background-position: center;">
                                        <div id="compassContainervent" style="transform: rotate(180deg);">
                                            <div id="compassRingvent">
                                                <div id="pointerContainvent" style="transform: rotate(180deg);">
                                                    <p style="margin: auto; text-align: center;">
                                                        <span id="wind_speed"></span><br>
                                                        <span>noeuds</span>
                                                    </p>
                                                </div>
                                            </div>
                                            <div id="compassRingventjaune">

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-6 text-center py-4">
                            <p class="text1 text-center">1 heure</p>
                            <div class="row">
                                <div class="col-6 text-center">
                                    <p class="text1">Moyenne</p>
                                    <p class="item text1" id="hour_speed"></p>
                                </div>
                                <div class="col-6 text-center">
                                    <p class="text1">Max</p>
                                    <p class="item text1" id="hour_max_speed"></p>
                                </div>
                            </div>
                            <p class="text1 text-center">3 heures</p>
                            <div class="row">
                                <div class="col-6 text-center">
                                    <p class="text1">Moyenne</p>
                                    <p class="item text1" id="hour_three_speed"></p>
                                </div>
                                <div class="col-6 text-center">
                                    <p class="text1">Max</p>
                                    <p class="item text1" id="hour_three_max_speed"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row p-0 line2 py-3">
                        <div class="col-12">
                            <h6 class="text1" style="font-weight: bold">Vagues</h6>
                        </div>
                        <div class="col-6">
                            <div class="row">
                                <div class="col" id="wind_direction">
                                    <div class="bg-boussolevague" style="background-image:url('/img-meteo/bg-bssl.png');background-size: auto 100%;background-repeat: no-repeat;background-position: center;">
                                        <div id="compassContainervague" style="transform: rotate(180deg);">
                                            <div id="compassRingvague">
                                                <div id="pointerContainvague">
                                                </div>
                                                <div id="compassRingvaguejaune" style="transform: rotate(180deg);">

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="row">
                                <div class="col-12">
                                    <div class="row">
                                        <div class="col-6">
                                            <p class="text1">Hauteur</p>
                                        </div>
                                        <div class="col-6">
                                            <p class="hauteur-vague text1" style="align:right; float:right;"><span id="wave_height"></span><span>m</span></p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="row">
                                        <div class="col-6">
                                            <p class="text1 ">Période</p>
                                        </div>
                                        <div class="col-6">
                                            <p class="periode-vague text1" style="align:right; float:right;"><span id="wave_period"></span><span>s</span></p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="row">
                                        <div class="col-6">
                                            <p class="text1">Température</p>
                                        </div>
                                        <div class="col-6">
                                            <p class="temp-vague text1" style="align:right; float:right;"><span id="temperature_two"></span><span>°C</span></p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row p-0 line2 py-1">
                        <div class="col-3 text-center">
                            <p class="text1" id="tide_type_hone"></p>
                            <p class="text1" id="tide_hone"></p>
                            <p class="text1"><span id="tide_height_hone"></span><span>m</span></p>
                        </div>
                        <div class="col-3 text-center">
                            <p class="text1" id="tide_type_bone"></p>
                            <p class="text1" id="tide_bone"></p>
                            <p class="text1"><span id="tide_height_bone"></span><span>m</span></p>
                        </div>
                        <div class="col-3 text-center">
                            <p class="text1" id="tide_type_htwo"></p>
                            <p class="text1" id="tide_htwo"></p>
                            <p class="text1"><span id="tide_height_htwo"></span><span>m</span></p>
                        </div>
                        <div class="col-3 text-center">
                            <p class="text1" id="tide_type_btwo"></p>
                            <p class="text1" id="tide_btwo"></p>
                            <p class="text1"><span id="tide_height_btwo"></span><span>m</span></p>
                        </div>
                    </div>
                    <div class="row p-0 line2 py-1">
                        <div class="col-12">
                            <div class="row">
                                <div class="col-6">
                                    <p class="text1 text-center" style="font-weight: bold">Pression atmosphérique</p>
                                </div>
                                <div class="col-6">
                                    <p class="text1 text-center" style="font-weight: bold">Variation sur 24h</p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-6">
                                    <p class="texth3 text-center pression-atmos"><span id="pressure"></span><span class="text1">hPa</span></p>
                                </div>
                                <div class="col-6">
                                    <p class="texth3 text-center variation" id="pressure_variation"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row p-0 py-1">
                        <div class="col-6">
                            <p class="text1 text-center" style="font-weight: bold">Précipitations</p>
                            <p class="texth3 text-center precipitation"><span id="humidity"></span><span class="text1">mm/h</span></p>
                        </div>
                        <div class="col-6">
                            <p class="text1 text-center" style="font-weight: bold">Cumul sur 24h</p>
                            <p class="texth3 text-center cumul"><span id="humidity_total"></span><span class="text1">mm</span></p>

                        </div>
                    </div>
                    <div class="row p-0 py-2">
                        <div class="col-6">
                            <p class="text1 text-center"></p>
                            <p class="texth3 text-center precipitation"></p>
                        </div>
                        <div class="col-6">
                            <p class="text1 text-center"></p>
                            <p class="texth3 text-center cumul"></p>

                        </div>
                    </div>
                </div>

                <br />
                <br />
                <br />
                {{element->navbar.html}}
            </div>
        </div>

    </main>



    <!-- color settings style switcher     <button type="button" class="btn btn-info colorsettings">
        <span class="text-white">
            <svg xmlns='http://www.w3.org/2000/svg' class="icon-size-24" viewBox='0 0 512 512'>
                <title>ionicons-v5-m</title>
                <path d='M430.11,347.9c-6.6-6.1-16.3-7.6-24.6-9-11.5-1.9-15.9-4-22.6-10-14.3-12.7-14.3-31.1,0-43.8l30.3-26.9c46.4-41,46.4-108.2,0-149.2-34.2-30.1-80.1-45-127.8-45-55.7,0-113.9,20.3-158.8,60.1-83.5,73.8-83.5,194.7,0,268.5,41.5,36.7,97.5,55,152.9,55.4h1.7c55.4,0,110-17.9,148.8-52.4C444.41,382.9,442,359,430.11,347.9Z' style='fill:none;stroke:#000;stroke-miterlimit:10;stroke-width:32px' />
                <circle cx='144' cy='208' r='32' />
                <circle cx='152' cy='311' r='32' />
                <circle cx='224' cy='144' r='32' />
                <circle cx='256' cy='367' r='48' />
                <circle cx='328' cy='144' r='32' />
            </svg>
        </span>
    </button>
        -->
    <!-- Required jquery and libraries -->
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>

    <!-- cookie js -->
    <script src="js/jquery.cookie.js"></script>

    <!-- Swiper slider  js-->
    <script src="vendor/swiper/js/swiper.min.js"></script>

    <!-- Masonry js -->
    <script src="vendor/masonry/masonry.pkgd.min.js"></script>

    <!-- nouislider js -->
    <script src="vendor/nouislider/nouislider.min.js"></script>

    <!-- Customized jquery file  -->
    <script src="js/main.js"></script>
    <script src="js/color-scheme-demo.js"></script>

    <!-- page level custom script -->
    <script>
        "use strict"
        $(window).on('load', function () {

            /* carousel */
            var swiper = new Swiper('.swiper-products', {
                slidesPerView: 'auto',
                spaceBetween: 0,
                pagination: 'false'
            });
        });

        fetch("/api/getharbour/" + localStorage['harbourid']).then(response => response.json()).then(_data => {
            fetch("/api/weather/coord?latitude=" + _data.data.latitude + "&longitude=" + _data.data.longitude).then(response => response.json()).then(_data => {
                console.log("météo");
                _data = JSON.parse(_data.data.data);
                var weather = _data.data.weather;
                console.log(weather);
                var date = new Date();
                var hour = date.getHours();
                var minutes = date.getMinutes();
                var hhmm = hour + minutes;

                var cloudy = "https://res.cloudinary.com/nauticspot/image/upload/v1623337758/GUERILLA%20-%20NAUTICSPOT/M%C3%A9t%C3%A9o/nuageux_2.1_dsd7ga.png"
                var rainy = "https://res.cloudinary.com/nauticspot/image/upload/v1623337759/GUERILLA%20-%20NAUTICSPOT/M%C3%A9t%C3%A9o/meteo-background-rain-2_dyyoyk.png"
                var sunCloudy = "https://res.cloudinary.com/nauticspot/image/upload/v1623337759/GUERILLA%20-%20NAUTICSPOT/M%C3%A9t%C3%A9o/meteo-background-sun_cloud-afternoon_sqr3a6.jpg"
                var nightClearsky = "https://res.cloudinary.com/nauticspot/image/upload/v1623337760/GUERILLA%20-%20NAUTICSPOT/M%C3%A9t%C3%A9o/Lune_i1ckbh.jpg"
                var sunsetClearsky = "https://res.cloudinary.com/nauticspot/image/upload/v1623337761/GUERILLA%20-%20NAUTICSPOT/M%C3%A9t%C3%A9o/meteo-background-sunset_bpfwzj.png"
                var rainHeavy = "https://res.cloudinary.com/nauticspot/image/upload/v1623337765/GUERILLA%20-%20NAUTICSPOT/M%C3%A9t%C3%A9o/meteo-background-rain_kztbgd.png"
                var sunshineClearsky = "https://res.cloudinary.com/nauticspot/image/upload/v1623337766/GUERILLA%20-%20NAUTICSPOT/M%C3%A9t%C3%A9o/meteo-background-sunshine_rzbzqh.png"
                weather[0].hourly.sort(function (a, b) {
                    return parseInt(a.time) - parseInt(b.time)
                });
                console.log(weather[0].hourly);


                console.log(weather[0].hourly[hour].weatherCode);
                var selectedImg;
                //case WeatherCode	Condition	DayIcon	NightIcon
                switch (weather[0].hourly[hour].weatherCode) {
                    case '395':	//Moderate or heavy snow in area with thunder
                        selectedImg = rainHeavy;
                        break;
                    case '392':	//Patchy light snow in area with thunder
                        selectedImg = rainHeavy;
                        break;
                    case '389':	//Moderate or heavy rain in area with thunder
                        selectedImg = rainHeavy;
                        break;
                    case '386':	//Patchy light rain in area with thunder
                        selectedImg = rainHeavy;
                        break;
                    case '377':	//Moderate or heavy showers of ice pellets
                        selectedImg = rainHeavy;
                        break;
                    case '374':	//Light showers of ice pellets
                        selectedImg = rainHeavy;
                        break;
                    case '371':	//Moderate or heavy snow showers
                        selectedImg = rainHeavy;
                        break;
                    case '368':	//Light snow showers
                        selectedImg = rainHeavy;
                        break;
                    case '365':	//Moderate or heavy sleet showers
                        selectedImg = rainHeavy;
                        break;
                    case '362':	//Light sleet showers
                        selectedImg = rainHeavy;
                        break;
                    case '359':	//Torrential rain shower
                        selectedImg = rainHeavy;
                        break;
                    case '356':	//Moderate or heavy rain shower
                        selectedImg = rainHeavy;
                        break;
                    case '353':	//Light rain shower
                        selectedImg = rainHeavy;
                        break;
                    case '350':	//Ice pellets
                        selectedImg = rainHeavy;
                        break;
                    case '338':	//Heavy snow
                        selectedImg = rainHeavy;
                        break;
                    case '335':	//Patchy heavy snow
                        selectedImg = rainHeavy;
                        break;
                    case '332':	//Moderate snow
                        selectedImg = rainHeavy;
                        break;
                    case '329':	//Patchy moderate snow
                        selectedImg = cloudy;
                        break;
                    case '326':	//Light snow
                        selectedImg = rainHeavy;
                        break;
                    case '323':	//Patchy light snow
                        selectedImg = rainHeavy;
                        break;
                    case '320':	//Moderate or heavy sleet
                        selectedImg = cloudy;
                        break;
                    case '317':	//Light sleet
                        selectedImg = cloudy;
                        break;
                    case '314':	//Moderate or Heavy freezing rain
                        selectedImg = cloudy;
                        break;
                    case '311':	//Light freezing rain
                        selectedImg = cloudy;
                        break;
                    case '308':	//Heavy rain
                        selectedImg = rainHeavy;
                        break;
                    case '305':	//Heavy rain at times
                        selectedImg = rainHeavy;
                        break;
                    case '302':	//Moderate rain
                        selectedImg = rainHeavy;
                        break;
                    case '299':	//Moderate rain at times
                        selectedImg = rainHeavy;
                        break;
                    case '296':	//Light rain
                        selectedImg = rainy;
                        break;
                    case '293':	//Patchy light rain
                        selectedImg = rainy;
                        break;
                    case '284':	//Heavy freezing drizzle
                        selectedImg = cloudy;
                        break;
                    case '281':	//Freezing drizzle
                        selectedImg = cloudy;
                        break;
                    case '266':	//Light drizzle
                        selectedImg = cloudy;
                        break;
                    case '263':	//Patchy light drizzle
                        selectedImg = rainHeavy;
                        break;
                    case '260':	//Freezing fog
                        selectedImg = cloudy;
                        break;
                    case '248':	//Fog
                        selectedImg = cloudy;
                        break;
                    case '230':	//Blizzard
                        selectedImg = cloudy;
                        break;
                    case '227':	//Blowing snow
                        selectedImg = cloudy;
                        break;
                    case '200':	//Thundery outbreaks in nearby
                        selectedImg = rainHeavy;
                        break;
                    case '185':	//Patchy freezing drizzle nearby
                        selectedImg = cloudy;
                        break;
                    case '182':	//Patchy sleet nearby
                        selectedImg = cloudy;
                        break;
                    case '179':	//Patchy snow nearby
                        selectedImg = rainy;
                        break;
                    case '176':	//Patchy rain nearby
                        selectedImg = rainy;
                        break;
                    case '143':	//Mist
                        selectedImg = cloudy;
                        break;
                    case '122':	//Overcast
                        selectedImg = cloudy;
                        break;
                    case '119':	//Cloudy
                        selectedImg = cloudy;
                        break;
                    case '116':	//Partly Cloudy
                        selectedImg = cloudy;
                        break;
                    case '113':	//Clear/Sunny
                        var sunrise = weather[0].astronomy[0].sunrise.split(':')[0]
                        var sunset = weather[0].astronomy[0].sunset.split(':')[0]
                        console.log("heure " + hour);
                        sunset = parseInt(sunset) + 12;
                        if (sunrise == '12')
                            sunrise = 0;
                        sunrise = parseInt(sunrise);
                        if (hour >= sunrise && hour <= sunrise + 1)
                            selectedImg = sunsetClearsky;
                        else if (hour <= sunset && hour >= sunset - 1)
                            selectedImg = sunsetClearsky;
                        else if (hour > sunset || hour < sunrise)
                            selectedImg = nightClearsky;
                        else
                            selectedImg = sunshineClearsky;
                        break;
                    default:
                        console.log(`Sorry, we are out of.`);
                }
                document.getElementById("weather_card").setAttribute("style", "background-image: url('" + selectedImg + "');background-position: center;background-size: auto 100%;");



                //document.getElementById("meteo_desc").innerHTML = (weather[0].hourly[hour].lang_fr[0].value);
                var moonPhase;
                var moonPhaseImg;
                switch (weather[0].astronomy[0].moon_phase) {
                    case 'New Moon':
                        moonPhase = 'Nouvelle Lune';
                        moonPhaseImg = '/img-meteo/moon/icons8-new-moon-64.png';
                        break;
                    case 'Waxing Crescent':
                        moonPhase = 'Premier croissant';
                        moonPhaseImg = '/img-meteo/moon/icons8-waxing-crescent-64.png';
                        break;
                    case 'First Quarter':
                        moonPhase = 'Premier quartier';
                        moonPhaseImg = '/img-meteo/moon/icons8-first-quarter-64.png';
                        break;
                    case 'Waxing Gibbous':
                        moonPhase = 'Gibbeuse croissante';
                        moonPhaseImg = '/img-meteo/moon/icons8-waxing-gibbous-64.png';
                        break;
                    case 'Full Moon':
                        moonPhase = 'Pleine Lune';
                        moonPhaseImg = '/img-meteo/moon/icons8-full-moon-64.png';
                        break;
                    case 'Waning Gibbous':
                        moonPhase = 'Gibbeuse décroissante';
                        moonPhaseImg = '/img-meteo/moon/icons8-waning-gibbous-64.png';
                        break;
                    case 'Last Quarter':
                        moonPhase = 'Dernier quartier';
                        moonPhaseImg = '/img-meteo/moon/icons8-last-quarter-64.png';
                        break;
                    case 'Waning Crescent':
                        moonPhase = 'Dernier croissant';
                        moonPhaseImg = '/img-meteo/moon/icons8-waning-crescent-64.png';
                        break;
                }
                var tide_data = weather[0].tides[0].tide_data;
                console.log(tide_data);
                for (var i = 0; i < tide_data.length; i++) {
                    console.log(tide_data[i]);
                    if (tide_data[i].tide_type == "LOW") tide_data[i].tide_type = 'Marée B';
                    else tide_data[i].tide_type = 'Marée H';

                    tide_data[i].tideDateTime = tide_data[i].tideDateTime.split(' ')[1];
                }

                var humidityTotal = 0;
                var lowestPressure = 0;
                var highiestPressure = 0;
                //var test = weather[0].hourly.sort((a, b) => parseInt(a.pressure) - parseInt(b.pressure));
                console.log("coucou");
                //console.log(test);
                var pressures = [];
                for (var i = 0; i < weather[0].hourly.length; i++) {
                    humidityTotal += parseInt(weather[0].hourly[i].precipMM);
                    pressures[i] = weather[0].hourly[i].pressure;
                }

                pressures.sort();
                var pressureDifference = pressures[23] - pressures[0];

                //var pressureVariation = ((weather[0].hourly[23].pressure - weather[0].hourly[0].pressure) / weather[0].hourly[0].pressure) * 100;
                var pressureVariation;

                var humidityh = 0;
                console.log(humidityTotal);
                if (humidityTotal != 0)
                    humidityh = humidityTotal / 60;

                var pastTwoHour;
                var pastOneHour;
                if (hour == 0 || hour == 1) {
                    pastTwoHour = 0;
                    pastOneHour = 0;
                }
                else {
                    pastTwoHour = hour - 2;
                    pastOneHour = hour - 1;
                }

                console.log(pastTwoHour);
                console.log(pastOneHour);
                var windSpeeds = [];
                windSpeeds[0] = Math.trunc(parseInt(weather[0].hourly[pastTwoHour].windspeedKmph) / 1.852);
                windSpeeds[1] = Math.trunc(parseInt(weather[0].hourly[pastOneHour].windspeedKmph) / 1.852);
                windSpeeds[2] = Math.trunc(parseInt(weather[0].hourly[hour].windspeedKmph) / 1.852);
                console.log(windSpeeds);
                var hourThreeSpeed = (windSpeeds[0] + windSpeeds[1] + windSpeeds[2]) / 3;

                windSpeeds.sort(function (a, b) {
                    return parseInt(a) - parseInt(b)
                });
                console.log(windSpeeds);
                document.getElementById("meteo_desc").innerHTML = weather[0].hourly[hour].lang_fr[0].value;

                document.getElementById("hour_speed").innerHTML = Math.trunc(weather[0].hourly[hour].windspeedKmph / 1.852);
                document.getElementById("hour_max_speed").innerHTML = Math.trunc(weather[0].hourly[hour].windspeedKmph / 1.852);

                document.getElementById("hour_three_speed").innerHTML = Math.trunc(hourThreeSpeed);
                document.getElementById("hour_three_max_speed").innerHTML = windSpeeds[2];

                document.getElementById("tide_hone").innerHTML = tide_data[0].tideDateTime;
                document.getElementById("tide_type_hone").innerHTML = tide_data[0].tide_type;
                document.getElementById("tide_height_hone").innerHTML = tide_data[0].tideHeight_mt;
                document.getElementById("tide_bone").innerHTML = tide_data[1].tideDateTime;
                document.getElementById("tide_type_bone").innerHTML = tide_data[1].tide_type;
                document.getElementById("tide_height_bone").innerHTML = tide_data[1].tideHeight_mt;
                document.getElementById("tide_htwo").innerHTML = tide_data[2].tideDateTime;
                document.getElementById("tide_type_htwo").innerHTML = tide_data[2].tide_type;
                document.getElementById("tide_height_htwo").innerHTML = tide_data[2].tideHeight_mt;
                document.getElementById("tide_btwo").innerHTML = tide_data[3].tideDateTime;
                document.getElementById("tide_type_btwo").innerHTML = tide_data[3].tide_type;
                document.getElementById("tide_height_btwo").innerHTML = tide_data[3].tideHeight_mt;
                document.getElementById("moon_img").src = moonPhaseImg;
                document.getElementById("moon_state").innerHTML = moonPhase;
                document.getElementById("wave_height").innerHTML = (weather[0].hourly[hour].swellHeight_m);
                document.getElementById("wave_period").innerHTML = (weather[0].hourly[hour].swellPeriod_secs);
                document.getElementById("compassRingvaguejaune").style.transform = "rotate(" + weather[0].hourly[hour].swellDir + "deg)"
                //document.getElementById("wind_direction").insertAdjacentHTML('beforeend', );
                document.getElementById("temperature_two").innerHTML = (weather[0].hourly[hour].waterTemp_C);
                document.getElementById("pressure_variation").innerHTML = (pressureDifference);


                fetch("/api/entity/get/" + localStorage["entity_id"], { method: "get" }).then(response => response.json()).then(_data => {
                    let entity = _data.data;
                    let weather_api = "";

                    if (entity.weather_api)
                        weather_api = entity.weather_api;

                    if (weather_api == "wlv1") {
                        fetch("/api/weather/wlink/vone?entity_id=" + entity.id).then(response => response.json()).then(_data => {
                            if (_data.success) {
                                let _wlData = JSON.parse(_data.data.data);
                                console.log(_wlData);
                                document.getElementById("temperature").innerHTML = parseFloat(_wlData.temp_c).toFixed(0);
                                document.getElementById("humidity").innerHTML = (parseFloat(_wlData.davis_current_observation.rain_rate_in_per_hr).toFixed(2));
                                document.getElementById("humidity_total").innerHTML = (parseFloat(_wlData.davis_current_observation.rain_day_in).toFixed(2));
                                document.getElementById("pressure").innerHTML = (parseFloat(_wlData.pressure_mb).toFixed(2));
                                document.getElementById("compassRingventjaune").style.transform = "rotate(" + _wlData.wind_degrees + "deg)"//insertAdjacentHTML('beforeend', weather[0].hourly[hour].winddirDegree);
                                //document.getElementById("wind_direction").insertAdjacentHTML('beforeend', );
                                document.getElementById("wind_speed").innerHTML = parseFloat(_wlData.wind_kt).toFixed(2);
                                document.getElementById("temperature_min").innerHTML = ((parseFloat(_wlData.davis_current_observation.temp_day_low_f).toFixed(2) - 32) / 1.8000).toFixed(0);
                                document.getElementById("temperature_max").innerHTML = ((parseFloat(_wlData.davis_current_observation.temp_day_high_f).toFixed(2) - 32) / 1.8000).toFixed(0);
                                //document.getElementById("wind_speed").insertAdjacentHTML('beforeend', '<div class="float-right">' + weather[0].hourly[hour].windspeedKmph + "Km/h</div>");
                                document.getElementById("hour_three_speed").innerHTML = Math.trunc(_wlData.davis_current_observation.wind_ten_min_avg_mph / 1.151);
                                document.getElementById("hour_three_max_speed").innerHTML = Math.trunc(_wlData.davis_current_observation.wind_ten_min_gust_mph / 1.151);
                                document.getElementById("hour_speed").innerHTML = Math.trunc(_wlData.davis_current_observation.wind_ten_min_avg_mph / 1.151);
                                document.getElementById("hour_max_speed").innerHTML = Math.trunc(_wlData.davis_current_observation.wind_ten_min_gust_mph / 1.151);
                            }

                        }).catch((error) => {
                            console.log("météo erreur");
                            console.log(error);
                        });

                    } else if (weather_api == "wlv2") {
                        fetch("/api/weather/wlink/vtwo?entity_id=" + entity.id).then(response => response.json()).then(_data => {
                            if (_data.success) {
                                let _wlData = _data.data.sensors[0].data[0];
                                let _wlDataTwo = _data.data.sensors[0].data[3];
                                console.log(_data.data);
                                console.log(_wlData);
                                document.getElementById("temperature").innerHTML = ('<i class="bi bi-thermometer-half"></i> ' + parseFloat((_wlData.temp - 32) / 1.8000).toFixed(0));
                                document.getElementById("humidity").innerHTML = ('<i class="bi bi-umbrella"></i> ' + parseFloat(_wlData.rainfall_last_60_min_mm).toFixed(2));
                                document.getElementById("humidity_total").innerHTML = (parseFloat(_wlData.rainfall_daily_mm).toFixed(2));
                                document.getElementById("pressure").innerHTML = (weather[0].hourly[hour].pressure);
                                document.getElementById("compassRingventjaune").style.transform = "rotate(" + _wlData.wind_dir_last + "deg)"//insertAdjacentHTML('beforeend', weather[0].hourly[hour].winddirDegree);
                                //document.getElementById("wind_direction").insertAdjacentHTML('beforeend', );
                                document.getElementById("wind_speed").innerHTML = parseFloat(_wlData.wind_speed_avg_last_1_min).toFixed(2);
                                document.getElementById("temperature_min").innerHTML = "";
                                document.getElementById("temperature_max").innerHTML = "";
                                document.getElementById("hour_three_speed").innerHTML = Math.trunc(_wlData.wind_speed_avg_last_2_min);
                                document.getElementById("hour_three_max_speed").innerHTML = Math.trunc(_wlData.wind_speed_hi_last_2_min);
                                document.getElementById("hour_speed").innerHTML = Math.trunc(_wlData.wind_speed_avg_last_10_min);
                                document.getElementById("hour_max_speed").innerHTML = Math.trunc(_wlData.wind_speed_hi_last_10_min);

                            }
                        }).catch((e) => console.error(e));
                    } else {
                        document.getElementById("temperature").innerHTML = (weather[0].hourly[hour].tempC);
                        document.getElementById("humidity_total").innerHTML = (humidityTotal);
                        document.getElementById("humidity").innerHTML = (humidityh);
                        document.getElementById("pressure").innerHTML = (weather[0].hourly[hour].pressure);
                        document.getElementById("compassRingventjaune").style.transform = "rotate(" + weather[0].hourly[hour].winddirDegree + "deg)"//insertAdjacentHTML('beforeend', weather[0].hourly[hour].winddirDegree);
                        document.getElementById("wind_speed").innerHTML = (Math.trunc(weather[0].hourly[hour].windspeedKmph / 1.852) + " ");
                        document.getElementById("temperature_min").innerHTML = (weather[0].mintempC);
                        document.getElementById("temperature_max").innerHTML = (weather[0].maxtempC);
                    }
                }).catch((error) => {
                    console.log("météo erreur");
                    console.log(error);
                });
            }).catch((error) => {
                console.log("météo erreur");
                console.log(error);
            });
        }).catch((error) => {
            console.log("météo erreur");
            console.log(error);
        });


    </script>

    <style>
        @font-face {
            font-family: 'Poppins Regular';
            font-style: normal;
            font-weight: normal;
            src: local('Poppins Regular'), url('/library/Poppins-Regular.woff') format('woff');
        }

        * {
            font-family: 'Poppins Regular' !important;
        }

        body {
            font-family: 'Poppins Regular' !important;
        }
    </style>
    {{element->footer_app.html}}

</body>
<!-- Mirrored from maxartkiller.com/website/Nauticspot/nearby.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 31 Aug 2020 16:49:14 GMT -->
</html>
